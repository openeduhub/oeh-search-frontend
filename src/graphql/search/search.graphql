query Search($searchString: String!, $from: Int!, $size: Int!, $filters: [Filter!]) {
  search(searchString: $searchString, from: $from, size: $size, filters: $filters) {
    ...result
  }
  didYouMeanSuggestion(searchString: $searchString, filters: $filters) {
    ...didYouMeanSuggestion
  }
  # TODO: dynamic language
  facets(searchString: $searchString, size: 20, filters: $filters, language: de) {
    ...facets
  }
}

fragment result on SearchResult {
  took
  hits {
    total {
      value
      relation
    }
    hits {
      id
      type
      lom {
        educational {
          description
        }
        general {
          title
          keyword
        }
        technical {
          location
        }
      }
      source {
        name
        url
      }
      thumbnail {
        mimetype
        small
      }
      collection {
        uuid
        name
        data {
          editorial
        }
      }
      license {
        oer
      }
      valuespaces {
        discipline {
          de
        }
        educationalContext {
          de
        }
        learningResourceType {
          de
        }
      }
    }
  }
}

fragment didYouMeanSuggestion on DidYouMeanSuggestion {
  plain
  html
}

fragment facets on Facets {
  sources {
    ...aggregation
  }
  keywords {
    ...aggregation
  }
  disciplines {
    ...aggregation
  }
  educationalContexts {
    ...aggregation
  }
  learningResourceTypes {
    ...aggregation
  }
  licenseOER {
    ...aggregation
  }
  types {
    ...aggregation
  }
  intendedEndUserRoles {
    ...aggregation
  }
  collections {
    ...aggregation
  }
}

fragment aggregation on Aggregation {
  buckets {
    doc_count
    key
  }
  field
}
