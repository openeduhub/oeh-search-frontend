<button mat-button (click)="goBack()" class="back-button">
  <mat-icon>keyboard_arrow_left</mat-icon> <ng-container i18n>Back to overview</ng-container>
</button>
<div class="header">
  <h1 class="title">{{ details.lom.general.title }}</h1>
  <a
    class="go-to-content-button"
    mat-raised-button
    color="primary"
    [href]="details.lom.technical.location"
    target="_blank"
    [ngSwitch]="details.type"
    ><mat-icon>open_in_new</mat-icon>
    <ng-container i18n *ngSwitchCase="'MATERIAL'">Go To Content</ng-container>
    <ng-container i18n *ngSwitchCase="'TOOL'">Go To Tool</ng-container>
    <ng-container i18n *ngSwitchCase="'SOURCE'">Go To Source</ng-container>
  </a>
</div>
<div class="body">
  <div class="column column-1">
    <img
      *ngIf="details.thumbnail"
      class="preview"
      [src]="
        details.thumbnail.large || details.thumbnail.small
          | safeBase64Data: details.thumbnail.mimetype
      "
    />
    <p class="description" *ngIf="details.lom.general?.description">
      {{ details.lom.general.description | trim }}
    </p>
  </div>
  <div class="column column-2">
    <div class="metadata metadata-editorial" *ngIf="details | isInCollection: 'EDITORIAL'">
      <label
        ><div class="icon editorial-icon"></div>
        <ng-container i18n>Recommended by editorial team</ng-container></label
      >
    </div>
    <div class="metadata" [ngSwitch]="details.license?.oer">
      <label
        ><div class="icon oer-icon"></div>
        <ng-container i18n>Open educational resources</ng-container></label
      >
      <span *ngSwitchCase="'ALL'" i18n>yes</span>
      <span *ngSwitchCase="'MIXED'" i18n>mixed</span>
      <span *ngSwitchCase="'NONE'" i18n>no</span>
      <span *ngSwitchDefault i18n>unknown</span>
    </div>
    <div class="metadata" *ngIf="details.valuespaces?.discipline">
      <label><mat-icon>book_icon</mat-icon> <ng-container i18n>Discipline</ng-container></label>
      <div>
        <span *ngFor="let discipline of details.valuespaces.discipline | slice: 0:5">
          {{ discipline | valuespacesI18n }}
        </span>
      </div>
    </div>
    <div class="metadata" *ngIf="details.valuespaces?.educationalContext">
      <label
        ><mat-icon>school</mat-icon> <ng-container i18n>Educational Context</ng-container></label
      >
      <div>
        <span *ngFor="let context of details.valuespaces.educationalContext">
          {{ context | valuespacesI18n }}
        </span>
      </div>
    </div>
    <div class="metadata" *ngIf="details.valuespaces?.intendedEndUserRole">
      <label
        ><mat-icon>group</mat-icon> <ng-container i18n>Intended End User Role</ng-container></label
      >
      <div>
        <span *ngFor="let intendedEndUserRole of details.valuespaces.intendedEndUserRole">
          {{ intendedEndUserRole | valuespacesI18n }}
        </span>
      </div>
    </div>
    <div class="metadata" *ngIf="details.valuespaces?.learningResourceType">
      <label
        ><mat-icon>photo_library</mat-icon> <ng-container i18n>Resource Type</ng-container></label
      >
      <div>
        <span *ngFor="let lrt of details.valuespaces.learningResourceType">
          {{ lrt | valuespacesI18n }}
        </span>
      </div>
    </div>

    <div class="metadata" *ngIf="details.lom.general.keyword">
      <label><mat-icon>list</mat-icon> <ng-container i18n>Keywords</ng-container></label>
      <div>
        <span *ngFor="let keyword of details.lom.general.keyword | slice: 0:5">
          {{ keyword }}
        </span>
      </div>
    </div>
    <div class="actions">
      <ng-container *ngIf="userInfo">
        <button mat-raised-button (click)="markAsRecommended()">
          <mat-icon>star</mat-icon>
          <ng-container *ngIf="!isRecommended" i18n>Mark as recommended</ng-container>
          <ng-container *ngIf="isRecommended" i18n>Remove recommendation</ng-container>
        </button>
        <button mat-raised-button color="warn" [disabled]="!isDisplayed" (click)="hide()">
          <mat-icon>delete</mat-icon>
          <ng-container i18n>Remove from search results</ng-container>
        </button>
      </ng-container>
      <a
        mat-button
        target="_blank"
        class="report-button"
        href="https://wirlernenonline.de/problem-melden/?id={{ id }}&title={{
          details.lom.general.title | encodeUriComponent
        }}"
        ><mat-icon>report_problem</mat-icon> <span i18n>Report a problem</span></a
      >
    </div>
  </div>
</div>
