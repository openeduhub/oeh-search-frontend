<form (ngSubmit)="onSubmit()">
  <mat-form-field appearance="outline" id="search-input">
    <input
      matInput
      [formControl]="searchField"
      autofocus
      [matAutocomplete]="auto"
      #autoComplete="matAutocompleteTrigger"
      placeholder="Search"
    />
    <button matSuffix mat-icon-button type="submit" aria-label="Search">
      <mat-icon>search</mat-icon>
    </button>
  </mat-form-field>
  <mat-autocomplete #auto="matAutocomplete" (optionSelected)="onAutocompleteSelected($event)">
    <mat-option *ngFor="let option of autoCompleteSuggestions$ | async" [value]="option">{{
      option
    }}</mat-option>
  </mat-autocomplete>
  <div *ngIf="facets" class="filters" [formGroup]="facetFilters">
    <mat-form-field *ngFor="let facet of facets | keyvalue">
      <mat-label>{{ facet.key }}</mat-label>
      <mat-select [formControlName]="facet.key" multiple>
        <mat-option *ngFor="let bucket of facet.value.buckets" [value]="bucket.key">
          {{ bucket.key }} ({{ bucket.doc_count }})
        </mat-option>
      </mat-select>
    </mat-form-field>
  </div>
</form>

<p *ngIf="didYouMeanSuggestion" class="did-you-mean">
  Did you mean:
  <a
    [innerHTML]="didYouMeanSuggestion.html"
    routerLink
    [queryParams]="{ q: didYouMeanSuggestion.plain }"
    queryParamsHandling="merge"
  ></a>
</p>

<!-- Results -->
<router-outlet></router-outlet>
