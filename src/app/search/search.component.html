<app-search-filterbar *ngIf="showFilterBar"></app-search-filterbar>

<div class="results">
  <app-work-in-progress-message></app-work-in-progress-message>
  <h1 class="breadcrumbs" *ngIf="breadcrumbs">
    <ng-container *ngFor="let breadcrumb of breadcrumbs; let last = last">
      <span>{{ breadcrumb }}</span>
      <mat-icon *ngIf="!last">keyboard_arrow_right</mat-icon>
    </ng-container>
  </h1>
  <p *ngIf="didYouMeanSuggestion" class="did-you-mean">
    <ng-container i18n>Did you mean:</ng-container>&nbsp;<a
      [innerHTML]="didYouMeanSuggestion.html"
      routerLink="/search"
      [queryParams]="{ q: didYouMeanSuggestion.plain }"
      queryParamsHandling="merge"
    ></a>
  </p>
  <div class="summary">
    <div class="no-results" *ngIf="results.hits.total.value === 0">
      <ng-container i18n>No results</ng-container>
      <div>
        <a
          *ngIf="filterCount > 0"
          mat-flat-button
          color="primary"
          routerLink="/search"
          [queryParams]="{ filters: null }"
          queryParamsHandling="merge"
          i18n
          >Search without filters</a
        >
      </div>
    </div>
    <ng-container *ngIf="results.hits.total.value > 0">
      <ng-container *ngIf="pageIndex === 0 && results.hits.total.relation === 'eq'" i18n>
        {results.hits.total, plural, =1 {1 result} other
        {{{results.hits.total.value | number}} results}}
      </ng-container>
      <ng-container *ngIf="pageIndex === 0 && results.hits.total.relation !== 'eq'" i18n>
        About {{ results.hits.total.value | number }} results
      </ng-container>
      <ng-container *ngIf="pageIndex > 0 && results.hits.total.relation === 'eq'" i18n>
        Page {{ pageIndex + 1 }} of {{ results.hits.total.value | number }} results
      </ng-container>
      <ng-container *ngIf="pageIndex > 0 && results.hits.total.relation !== 'eq'" i18n>
        Page {{ pageIndex + 1 }} of about {{ results.hits.total.value | number }} results
      </ng-container>
      <!-- <ng-container i18n>({{ results.took / 1000 | number }} seconds)</ng-container> -->
    </ng-container>
  </div>
  <app-subjects-portal *ngIf="showSubjectsPortal"></app-subjects-portal>
  <ng-container *ngIf="results.hits.total.value > 0">
    <h2 i18n>All Search Results</h2>
    <app-search-results [hits]="results.hits"></app-search-results>
  </ng-container>
</div>

<app-add-content-fab></app-add-content-fab>
